---
typora-copy-images-to: SpringCloudPictures
---

# 什么是网关

网关==统一服务入口路径——对所有服务进行集中管控==（前端Vue不可能一个个去直接调用后端集群服务的地址），可方便实现==对平台众多服务接口进行管控==；对访问服务的==身份认证==、防报文重发与防数据篡改、==功能调用的业务鉴权==、响应数据的脱敏、流量与并发控制，甚至基于 API 调用的计量或者计费等等。

![网关组件](SpringCloudPictures/网关组件.png)

网关 =  路由转发 + 过滤器
	

- 路由转发：接收一切外界请求，转发到后端的微服务上去，实现对服务的统一管理；
  	
- 在服务网关中可以完成一系列的==横切功能==，例如权限校验、限流以及监控等，这些都可以通过过滤器完成。

# Zuul

API 网关为微服务架构中的服务==提供了统一的访问入口==，客户端通过 API 网关访问相关服务。API 网关相当于整个微服务架构中的门面，所有客户端的访问都通过它来进行路由及过滤。它实现了请求路由、负载均衡、校验过滤、服务容错、服务聚合等功能。

# Spring Cloud Gateway

Gateway 是在 Spring 生态系统之上构建的 API 网关服务，基于Spring 5，Spring Boot 2 和 Project Reactor 等技术。

Gateway 旨在提供一种简单而有效的方式来对 API 进行路由，以及提供一些强大的过滤器功能， 例如：熔断、限流、重试等。

Spring Cloud Gateway 具有如下特性：

- 基于 Spring Framework 5、Project Reactor 和 Spring Boot 2.0 进行构建；
- 动态路由：能够匹配任何请求属性；
- 可以对路由指定 Predicate（断言）和 Filter（过滤器）；
  - Route（路由）：路由是构建网关的基本模块，它由ID，目标URI，一系列的断言和过滤器组成，如果断言为 true 则匹配该路由；
  - Predicate（断言）：指的是 Java 8 的 Function Predicate。 输入类型是 Spring 框架中的 ServerWebExchange。这使开发人员可以匹配 HTTP 请求中的所有内容，例如请求头或请求参数。如果请求与断言相匹配，则进行路由；
  - Filter（过滤器）：指的是 Spring 框架中 GatewayFilter 的实例，使用过滤器，可以在请求被路由前后对请求进行修改。
- 集成 Hystrix 的断路器功能；
- 集成 Spring Cloud 服务发现功能；
- 易于编写的 Predicate（断言）和 Filter（过滤器）；
- 请求限流功能；
- 支持路径重写。
